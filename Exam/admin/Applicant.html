
<div id="dveconfsys_xm_Applicant" class="div-form" prefix="uxL" >
    <h2 class="title"> Applicant Registration and Validation </h2>
    <div class="div-row">
        <label>First Name</label>
        <input type="text" id="uxLFirstName" rule="{fn:'required'}" vgroup="s"  placeholder="اسم درخواست کننده  " maxlength=18  >
        <label>Father Name</label>
        <input type="text" id="uxLFatherName" rule="{fn:'required'}" vgroup="s"  placeholder="اسم پدر " />
    </div>
    <div class="div-row">
        <label>Last Name</label>
        <input type="text" id="uxLLastName" rule="{fn:'required'}" vgroup="s" placeholder="تخلص  " maxlength=18>
        <label>Address</label>
        <input id="uxLAddressID" type="text" path="look.Location" rule="{fn:'required'}" vgroup="s" class="tree" placeholder="ولایت|ولسوالی را انتخاب نماید" />
    </div>
    <div class="div-row">
        <label>NID</label>
        <input id="uxLNID" type="text" rule="{fn:'phone'}" vgroup="s"  placeholder="نمبر تذکره" />
    </div>
    <div class="div-form-control">
        <input type="submit" action="create" value="جدید" />
        <input type="submit" action="save" vgroup="s" value="ثبت" />
        <input type="submit" action="search" value="جستجو">
        <div class="toggler"></div>
    </div>
    <grid id="gveconfsys_xm_vApplicant" style="max-height:200px;">
        <column id="FirstName" caption="اسم"></column>
        <column id="FatherName" caption="اسم پدر"></column>
        <column id="NID" caption="نمبر تذکره"></column>
    </grid>
</div>
<div id="dveconfsys_xm_ApplicantOTP" class="div-form subform" parent="dveconfsys_xm_Applicant" prefix="uxM" afterbind=""  style="top:10px;"  >
    <h2 class="title">Generate OTP</h2>
    <div class="div-row">
        <label>OTP</label>
       <!-- <input type="hidden" id="uxPStatusID" value="42" default="42" keep="true" />-->
        <input type="text" id="uxMOTP" disabled="disabled"/>
    </div>
    <div class="div-row">
        <label>بارکد</label>
        <svg id="barcode1" class="Print"></svg>
    </div>
    <div class="div-form-control">
        <input type="submit" action="save" id="_genOPT" value="GEN-OTP" onclick="fnCallMethods()" />
        <input type="submit" action="create" value="جدید" id="_clrbarcode" />
        <!--<input type="submit" action="save" vgroup="s" value="ثبت" />-->
        <!--<input type="submit" id="Print" value="پرنت بارکد">-->
        <input type="submit" action="print" value="پرنت" id="_clrbarcode" />
        <div class="toggler"></div>
    </div>
    <grid id="gveconfsys_xm_vApplicantOTP" style="max-height:100px;">
        <column id="OTP" caption="OTP"></column>
        <command action="print" src="../../skin/icon/printer.png" />
    </grid>
</div>
<script>
    function fnCallMethods() {
        JsBarcode("#barcode1", $('#dveconfsys_xm_ApplicantOTP').data('widget').record[2]);
        var Printwindow = window.open("", "true");
       



        var templ =
            "<html>                                " +
                "    <head>                            " +
                "        <style>                       " +
                "            img{                      " +
                "               display:block;         " +
                "               margin: auto;          " +
                "               border:;" +
                "               border-radius:;     " +
                "            }                         " +
                "        </style>                      " +
                "    </head>                           " +
            "    <body>                            " +
                "  " +
                "<form style='margin:auto;'> " +
                "<fieldset style='position:relative;margin-left: 0em;margin-right: 1em;' >" +
                "<legend>" +
                "Info" +
                "</legend>" +
                "Name:$FirstName" +
                "<br>" +
                "FatherName: $FatherName" +
                "<br>" +
                "OTP:$image  " +
                "</fieldset>" +
                "" +
                "" +
                "" +
                "</form>  " +
                "" +
                "" +
                "" +
                "" +
                "" +
                "                        " +
                "                               " +
                "    </body>                           " +
                "</html>                               ";
        Printwindow.document.write(templ.replace(
            '$FirstName', $('#uxLFirstName').val())
        .replace('$FatherName', $('#uxLFatherName').val())
            .replace('$image', $("#barcode1").get(0).outerHTML)
            .replace(/"/g, '\''));
        Printwindow.document.close();
    }


    function Barcode() {

       // var t = $('#dveconfsys_xm_ApplicantOTP').data('widget').record[2];
        //var total ='AK'+t;
        //$('#uxdCode').val(total);

        //if ($('#dveconfsys_xm_ApplicantOTP').data('widget').record) {
            //  var ItemCode = $('#dvIMS_stc_BarCodeDetail').data('widget').record[1];

            // JsBarcode("#barcode1", 'GRP-AFTEL' + ItemCode + '');


            //JsBarcode("#barcode1", "GRP-AFTEL " + ItemCode + "");
            JsBarcode("#barcode1", $('#dveconfsys_xm_ApplicantOTP').data('widget').record[2]);


        //}
    }







  


    $("#Print").click(function () {
        var Printwindow = window.open("", "true");
        var templ =
            "<html>                                " +
                "    <head>                            " +
                "        <style>                       " +
                "            img{                      " +
                "               display:block;         " +
                "               margin: auto;          " +
                "               border:;" +
                "               border-radius:;     " +
                "            }                         " +
                "        </style>                      " +
                "    </head>                           " +
                "    <body>                            " +
                "         $FirstName                       " +
                "         $image                       " +
                "    </body>                           " +
                "</html>                               ";
        Printwindow.document.write(templ.replace(
            '$FirstName', $('#uxLFirstName').val())
            .replace('$image', $("#barcode1").get(0).outerHTML)
            .replace(/"/g, '\''));
        Printwindow.document.close();
    });


</script>
